{"version":3,"file":"sendsay-umid.js","sources":["../src/utils.ts","../src/umid.ts"],"sourcesContent":["const genRandomHash = (len: number): string => (\n  Math.random().toString(36).substr(2, len).toUpperCase()\n);\n\nexport const genUMID = (): string => (\n  Array(4).fill(null).map(() => genRandomHash(8)).join('-')\n);\n","import {genUMID} from './utils';\n\nlet UMID_KEY = 'SENDSAY_UMID_KEY';\n\n/**\n * Get umid\n * @return Promise<string> \n */\nconst get = (): Promise<string> => {\n  return new Promise((resolve, reject) => {\n    try {\n      let umid = localStorage.getItem(UMID_KEY);\n\n      if (!umid) {\n        umid = genUMID();\n        localStorage.setItem(UMID_KEY, umid);\n      }\n\n      resolve(umid);\n    } catch (e) {\n      reject(e);\n    }\n  });\n};\n\nconst setKey = (key: string): void => {\n  if (!key) {\n    return;\n  }\n\n  UMID_KEY = key;\n};\n\nexport const UMID = {\n  get,\n  setKey\n};\n"],"names":["genRandomHash","len","Math","random","toString","substr","toUpperCase","genUMID","Array","fill","map","join","UMID_KEY","get","Promise","resolve","reject","umid","localStorage","getItem","setItem","e","setKey","key","UMID"],"mappings":";;;EAAA,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,CAACC,GAAD;EAAA,SACpBC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqCJ,GAArC,EAA0CK,WAA1C,EADoB;EAAA,CAAtB;;EAIO,IAAMC,OAAO,GAAG,SAAVA,OAAU;EAAA,SACrBC,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,IAAd,EAAoBC,GAApB,CAAwB;EAAA,WAAMV,aAAa,CAAC,CAAD,CAAnB;EAAA,GAAxB,EAAgDW,IAAhD,CAAqD,GAArD,CADqB;EAAA,CAAhB;;ECFP,IAAIC,QAAQ,GAAG,kBAAf;EAEA;EACA;EACA;EACA;;EACA,IAAMC,GAAG,GAAG,SAANA,GAAM,GAAuB;EACjC,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;EACtC,QAAI;EACF,UAAIC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqBP,QAArB,CAAX;;EAEA,UAAI,CAACK,IAAL,EAAW;EACTA,QAAAA,IAAI,GAAGV,OAAO,EAAd;EACAW,QAAAA,YAAY,CAACE,OAAb,CAAqBR,QAArB,EAA+BK,IAA/B;EACD;;EAEDF,MAAAA,OAAO,CAACE,IAAD,CAAP;EACD,KATD,CASE,OAAOI,CAAP,EAAU;EACVL,MAAAA,MAAM,CAACK,CAAD,CAAN;EACD;EACF,GAbM,CAAP;EAcD,CAfD;;EAiBA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAACC,GAAD,EAAuB;EACpC,MAAI,CAACA,GAAL,EAAU;EACR;EACD;;EAEDX,EAAAA,QAAQ,GAAGW,GAAX;EACD,CAND;;MAQaC,IAAI,GAAG;EAClBX,EAAAA,GAAG,EAAHA,GADkB;EAElBS,EAAAA,MAAM,EAANA;EAFkB;;;;;;;;;;"}